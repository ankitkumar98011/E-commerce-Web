{% extends "base.html" %}
{% block title %}Help Center | SmartShop{% endblock %}

{% block content %}
<div class="container" style="max-width: 1000px; margin: 40px auto; padding: 20px;">
    <h1 style="text-align: center; margin-bottom: 10px; color: #333;">‚ùì Help Center</h1>
    <p style="text-align: center; color: #666; margin-bottom: 40px;">Find answers to common questions and get support</p>

    <!-- Search Bar -->
    <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 40px;">
        <input type="text" id="searchInput" placeholder="Search for help..." onkeyup="filterFAQ()" 
               style="width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 5px; font-size: 1rem;">
    </div>

    <!-- AI Chat Support -->
    {% if user.is_authenticated %}
    <div style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding:25px; border-radius:8px; margin-bottom:40px; color:white; text-align:center;">
        <h3 style="margin:0 0 10px 0;">üí¨ Need Help? Ask Our AI Assistant</h3>
        <p style="margin:0 0 15px 0; opacity:0.9;">Get instant answers to your questions about products, orders, payments, and more!</p>
        <a href="{% url 'app:ai_chat' %}" style="display:inline-block; background:white; color:#667eea; padding:10px 25px; border-radius:5px; text-decoration:none; font-weight:bold;">
            üí¨ Start AI Chat
        </a>
    </div>
    {% else %}
    <div style="background:#f0f7ff; padding:25px; border-radius:8px; margin-bottom:40px; border-left:4px solid #3498db;">
        <p style="margin:0; color:#333;">
            <a href="{% url 'app:login' %}" style="color:#3498db; font-weight:bold;">Login to use AI Chat Support</a> - Get instant help for your shopping questions!
        </p>
    </div>
    {% endif %}

    <!-- FAQ Sections -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
        <!-- Column 1 -->
        <div>
            <!-- Buying Section -->
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 25px;">
                <h2 style="margin: 0 0 20px 0; color: #667eea; border-bottom: 3px solid #667eea; padding-bottom: 10px;">üõí Buying</h2>
                
                <div class="faq-item" data-keywords="account login register">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>How do I create an account?</span>
                        <span style="color: #667eea;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Click on the "Sign Up" button on the homepage, enter your email, create a password, and verify your email. Your account will be ready to use immediately!
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="cart add product shopping">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>How do I add items to my cart?</span>
                        <span style="color: #667eea;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Browse products, click on the item you want, and click the "üõí Add to Cart" button. You can adjust quantities and continue shopping or proceed to checkout.
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="payment methods card upi cod">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>What payment methods do you accept?</span>
                        <span style="color: #667eea;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        We accept multiple payment methods: Credit/Debit Cards, UPI, and Cash on Delivery (CoD). Choose your preferred method during checkout.
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="order tracking status delivery">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>How can I track my order?</span>
                        <span style="color: #667eea;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Go to "My Orders" in your account settings. You'll see real-time tracking of your orders with status updates from Pending to Delivered.
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="return refund exchange">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>What is your return policy?</span>
                        <span style="color: #667eea;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        You can return items within 30 days of delivery if they are unused and in original condition. Visit My Orders and click "Request Return" to start the process.
                    </p>
                </div>
            </div>
        </div>

        <!-- Column 2 -->
        <div>
            <!-- Selling Section -->
            <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 25px;">
                <h2 style="margin: 0 0 20px 0; color: #27ae60; border-bottom: 3px solid #27ae60; padding-bottom: 10px;">üè™ Selling</h2>
                
                <div class="faq-item" data-keywords="seller registration business shop">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>How do I become a seller?</span>
                        <span style="color: #27ae60;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Go to Settings ‚Üí Seller Account and click "Become a Seller". Fill in your shop details, bank information, and wait for admin verification. You'll receive an email once approved!
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="upload product listing sell">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>How do I upload products?</span>
                        <span style="color: #27ae60;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Once approved as a seller, go to Settings ‚Üí Seller Account and click "+ Upload Product". Fill in product details, set price and stock, and submit. Your product will be reviewed before going live.
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="bank details payment settlement earnings">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>How do I get paid for my sales?</span>
                        <span style="color: #27ae60;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Add your bank details in Settings ‚Üí Seller Account ‚Üí Bank Details. Once verified, we'll automatically transfer your earnings every week to your account. Check your earnings summary anytime!
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="commission fees charges">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>What are the seller commission charges?</span>
                        <span style="color: #27ae60;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Commission varies by category (typically 10-15%). You'll see the final amount you'll receive after commission when uploading products.
                    </p>
                </div>

                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="faq-item" data-keywords="account dashboard analytics orders">
                    <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <span>How do I view my sales and analytics?</span>
                        <span style="color: #27ae60;">+</span>
                    </h3>
                    <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                        Visit the Seller Dashboard (Settings ‚Üí Seller Account ‚Üí Go to Dashboard) to see your sales, earnings, product performance, and detailed analytics.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Account & General Section -->
    <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 40px;">
        <h2 style="margin: 0 0 20px 0; color: #f39c12; border-bottom: 3px solid #f39c12; padding-bottom: 10px;">‚öôÔ∏è Account & General</h2>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="faq-item" data-keywords="password reset security change">
                <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                    <span>How do I reset my password?</span>
                    <span style="color: #f39c12;">+</span>
                </h3>
                <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                    Click "Forgot Password" on the login page. Enter your email, and we'll send you a reset link. Follow the link to create a new password.
                </p>
            </div>

            <div class="faq-item" data-keywords="profile address location update">
                <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                    <span>How do I update my profile and address?</span>
                    <span style="color: #f39c12;">+</span>
                </h3>
                <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                    Go to Settings ‚Üí My Profile or Location to update your personal information, address, and contact details. Changes are saved immediately.
                </p>
            </div>

            <div class="faq-item" data-keywords="email notifications preferences">
                <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                    <span>How do I manage my notifications?</span>
                    <span style="color: #f39c12;">+</span>
                </h3>
                <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                    Go to Settings ‚Üí Preferences to customize email notifications for orders, recommendations, and promotional content.
                </p>
            </div>

            <div class="faq-item" data-keywords="account delete close remove">
                <h3 onclick="toggleFAQ(this)" style="cursor: pointer; color: #333; margin: 0 0 10px 0; display: flex; justify-content: space-between; align-items: center;">
                    <span>How do I delete my account?</span>
                    <span style="color: #f39c12;">+</span>
                </h3>
                <p class="faq-answer" style="display: none; color: #666; margin: 10px 0; line-height: 1.6;">
                    Contact our support team with your request. We'll guide you through the process and ensure all your data is securely removed.
                </p>
            </div>
        </div>
    </div>

    <!-- Contact Support Section -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 8px; text-align: center;">
        <h2 style="margin: 0 0 15px 0;">Didn't find your answer?</h2>
        <p style="margin: 0 0 25px 0; font-size: 1.1rem;">Our support team is here to help you 24/7!</p>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 30px;">
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                <p style="margin: 0 0 10px 0; font-size: 2rem;">üìß</p>
                <p style="margin: 0 0 5px 0; font-weight: bold;">Email</p>
                <p style="margin: 0;">support@smartshop.com</p>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                <p style="margin: 0 0 10px 0; font-size: 2rem;">üí¨</p>
                <p style="margin: 0 0 5px 0; font-weight: bold;">Live Chat</p>
                <p style="margin: 0;">Available 9 AM - 9 PM IST</p>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;">
                <p style="margin: 0 0 10px 0; font-size: 2rem;">üì±</p>
                <p style="margin: 0 0 5px 0; font-weight: bold;">Phone</p>
                <p style="margin: 0;">+91-1800-SMARTSHOP</p>
            </div>
        </div>
        
        <button onclick="window.location.href='mailto:support@smartshop.com'" style="padding: 12px 40px; background: white; color: #667eea; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 1rem;">
            ‚úâÔ∏è Contact Support
        </button>
    </div>
</div>

<script>
function toggleFAQ(element) {
    const answer = element.nextElementSibling;
    const icon = element.querySelector('span:last-child');
    
    // Close all other answers
    document.querySelectorAll('.faq-answer').forEach(el => {
        if (el !== answer && el.style.display === 'block') {
            el.style.display = 'none';
            el.previousElementSibling.querySelector('span:last-child').textContent = '+';
        }
    });
    
    // Toggle current answer
    if (answer.style.display === 'block') {
        answer.style.display = 'none';
        icon.textContent = '+';
    } else {
        answer.style.display = 'block';
        icon.textContent = '‚àí';
    }
}

function filterFAQ() {
    const searchInput = document.getElementById('searchInput').value.toLowerCase();
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const keywords = item.getAttribute('data-keywords').toLowerCase();
        const text = item.textContent.toLowerCase();
        
        if (keywords.includes(searchInput) || text.includes(searchInput)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
    
    // Close all answers when searching
    document.querySelectorAll('.faq-answer').forEach(el => {
        el.style.display = 'none';
        el.previousElementSibling.querySelector('span:last-child').textContent = '+';
    });
}
</script>

<style>
    .container {
        max-width: 1000px;
    }

    @media (max-width: 768px) {
        div[style*="grid-template-columns: 1fr 1fr"] {
            grid-template-columns: 1fr !important;
        }
        
        div[style*="grid-template-columns: 1fr 1fr 1fr"] {
            grid-template-columns: 1fr !important;
        }
    }
</style>
{% endblock %}
